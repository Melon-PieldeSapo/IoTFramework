{
    "control":{
        "address" : "localhost",
        "port": 1883,
        "topic":"master/control",
        "qos":0,
        "control_messages":{
            "reload":"reload",
            "shutdown":"shutdown",
            "status":"status"
        }
    },
    "joiners":[
    {
        "id":"join_1",
        "function":"({0}+{1})/({0}-{2})",
        "topics":[
             {
                "function":"Raw",
                "samples":1,
                "topic":"joined/function0/raw"
            },
            {
                "function":"Variance",
                "topic":"joined/junction0/stats/variance",
                "samples":20,
                "retain":1
            },{
                "function":"Mean",
                "samples":20,
                "topic":"joined/function0/stats/mean"
            }
        ]
    },{
        "id":"join_2",
        "function":"({0}/{1})*({0}/{2})",
        "topics":[
             {
                "function":"Raw",
                "samples":1,
                "topic":"joined/function0/raw"
            }
        ]
    },{
        "id":"join_0",
        "function":"({0}*{1})/({0}*{2})",
        "topics":[
             {
                "function":"Raw",
                "samples":1,
                "topic":"joined/function0/raw"
            }
        ]
    }
    ],
    "sockets": [
        {
            "class_name" : "FileSocket",
            "control":[
                {
                    "topic" : "interferometer/control/power",
                    "qos" : 1,
                    "actions":[
                        {
                            "message":"stop",
                            "action":0
                        },
                        {
                            "message":"start",
                            "action":1
                        }
                    ]
                },{
                    "topic" : "interferometer/control/payload",
                    "actions":[
                        {
                            "message":"pause",
                            "action":0
                        },
                        {
                            "message":"resume",
                            "action":1
                        }
                    ]
                }
            ],
            "publish" : {                
                "join":[
                    {"to":"join_1","position":2},  
                    {"to":"join_2","position":0},  
                    {"to":"join_2","position":1}               
                ],
                "topics":[
                    {
                        "function":"Raw",
                        "samples":100,
                        "topic":"interferometer/signal/raw",
                        "qos":1,
                        "retain":0
                    },{
                        "function":"Raw",
                        "samples":500,
                        "topic":"interferometer/signal/stats/raw",
                        "qos":1,
                        "retain":1
                    },{
                        "function":"StandardDeviation",
                        "samples":500,
                        "topic":"interferometer/signal/stats/std",
                        "qos":1
                    },{
                        "function":"Variance",
                        "topic":"interferometer/signal/stats/variance",
                        "samples":500,
                        "retain":1
                    },{
                        "function":"Mean",
                        "samples":500,
                        "topic":"interferometer/signal/stats/mean"
                    }
                ]
            }, 
            "file_name" : "salida_simulador.txt",
            "delay" : 0.001
        },
        {
            "class_name" : "FileSocket",
            "control":[
                {
                    "topic" : "rocket/control/power",
                    "qos" : 1,
                    "actions":[
                        {
                            "message":"stop",
                            "action":0
                        },
                        {
                            "message":"start",
                            "action":1
                        }
                    ]
                }
            ],
            "publish" : { 
                "parser":"#{0}:{1};",
                "join":[
                    {"from":0,"to":"join_1","position":0},  
                    {"from":1,"to":"join_1","position":1},  
                    {"from":1,"to":"join_2","position":0},  
                    {"from":1,"to":"join_2","position":1}               
                ],
                "topics":[
                    [
                            {
                                "function":"Raw",
                                "samples":1,
                                "topic":"rocket/acelerometer/raw",
                                "qos":0
                            },
                            {
                                "function":"Variance",
                                "samples":10,
                                "topic":"rocket/acelerometer/variance",
                                "qos":0
                            }
                        ],
                     [
                            {
                                "function":"Raw",
                                "samples":1,
                                "topic":"rocket/altitude/raw",
                                "qos":0
                            },
                            {
                                "function":"Mean",
                                "samples":10,
                                "topic":"rocket/altitude/mean",
                                "qos":0
                            },{
                                "function":"Mean"
                            }
                        ]
                    ]
                }, 
            "file_name" : "test_parser.txt",
            "delay" : 0.5
        }
    ]

}
